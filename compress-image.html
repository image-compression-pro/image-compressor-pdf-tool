<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image Compression Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#141e30,#243b55);
  color:#fff;
}

header{
  text-align:center;
  padding:50px 20px 30px;
}

.container{
  max-width:900px;
  margin:0 auto 80px;
  padding:20px;
}

.card{
  background:rgba(255,255,255,0.12);
  padding:40px;
  border-radius:22px;
  text-align:center;
}

.drop{
  border:2px dashed rgba(255,255,255,0.45);
  border-radius:18px;
  padding:40px 20px;
  cursor:pointer;
  margin-bottom:25px;
}

.drop:hover{opacity:.9}

input[type=range]{width:100%}

button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:16px;
  font-size:17px;
  background:linear-gradient(135deg,#ff512f,#dd2476);
  color:#fff;
  cursor:pointer;
  margin-top:15px;
}

#preview{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin:20px 0;
  justify-content:center;
}

#preview img{
  width:100px;
  height:100px;
  object-fit:cover;
  border-radius:10px;
}

#info{margin-top:10px;opacity:.9}
</style>
</head>

<body>

<header>
  <h1>ðŸ–¼ Image Compression Tool</h1>
  <p>Batch compress images directly in your browser</p>
</header>

<div class="container">
  <div class="card">

    <label class="drop">
      <strong>Drag & Drop Images</strong><br>
      <span>or click to upload</span>
      <input type="file" id="images" multiple accept="image/*" hidden>
    </label>

    <div id="preview"></div>

    <label>
      Compression Level:
      <b><span id="qv">70%</span></b>
    </label>

    <input type="range" id="qr" min="10" max="100" value="70"
      oninput="qv.innerText=this.value+'%'">

    <button onclick="compressAll()">Compress & Download ZIP</button>

    <p id="info"></p>

  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<script>
const input = document.getElementById("images");
const preview = document.getElementById("preview");
const info = document.getElementById("info");

input.addEventListener("change", () => {
  preview.innerHTML = "";
  [...input.files].forEach(file => {
    const img = document.createElement("img");
    img.src = URL.createObjectURL(file);
    preview.appendChild(img);
  });
});

async function compressAll(){
  const files = input.files;
  const quality = document.getElementById("qr").value / 100;

  if(!files.length){
    info.innerText = "Please select images first.";
    return;
  }

  info.innerText = "Compressing images...";
  const zip = new JSZip();

  for(const file of files){
    const dataURL = await new Promise(res=>{
      const r=new FileReader();
      r.onload=e=>res(e.target.result);
      r.readAsDataURL(file);
    });

    const img = new Image();
    await new Promise(res=>{img.onload=res;img.src=dataURL});

    const canvas=document.createElement("canvas");
    canvas.width=img.width;
    canvas.height=img.height;
    canvas.getContext("2d").drawImage(img,0,0);

    const blob = await new Promise(res =>
      canvas.toBlob(res,"image/jpeg",quality)
    );

    zip.file(file.name.replace(/\.\w+$/,".jpg"),blob);
  }

  const zipBlob = await zip.generateAsync({type:"blob"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(zipBlob);
  a.download="compressed-images.zip";
  a.click();

  info.innerText="Done! ZIP downloaded.";
}
</script>

</body>
</html>
